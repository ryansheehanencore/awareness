<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Real-time Voice Transcription Display</title>
    <style>
        body {
            background-color: black;
            color: white;
            font-size: 24px;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            overflow: hidden;
        }
        #transcription {
            text-align: center;
            white-space: pre-wrap;
        }
        #menu {
            position: absolute;
            top: 10px;
            left: 10px;
            opacity: 0;
            transition: opacity 1s;
        }
    </style>
</head>
<body>
    <div id="menu">Up/Down Font Size: 24<br>Left/Right Fade Rate: 1000</div>
    <div id="transcription">Press 'M' to unmute</div>
    <script>
        let transcription = document.getElementById('transcription');
        let menu = document.getElementById('menu');
        let fontSize = 24;
        let fadeRate = 1000;
        let recognizing = false;
        let recognition;

        if ('webkitSpeechRecognition' in window) {
            recognition = new webkitSpeechRecognition();
            recognition.continuous = true;
            recognition.interimResults = true;
            recognition.lang = 'en-US';

            recognition.onresult = function(event) {
                let interim_transcript = '';
                for (let i = event.resultIndex; i < event.results.length; ++i) {
                    if (event.results[i].isFinal) {
                        interim_transcript += event.results[i].transcript + ' ';
                    }
                }
                displayTranscription(interim_transcript);
            };

            recognition.onend = function() {
                if (recognizing) {
                    recognition.start();
                }
            };
        }

        function displayTranscription(text) {
            transcription.innerText = text;
            transcription.style.opacity = 1;
            setTimeout(() => {
                transcription.style.opacity = 0;
            }, fadeRate);
        }

        document.addEventListener('keydown', (event) => {
            if (event.key === 'm' || event.key === 'M') {
                if (!recognizing) {
                    recognition.start();
                    recognizing = true;
                    transcription.innerText = '';
                }
            } else if (event.key === 'ArrowUp') {
                fontSize += 2;
                document.body.style.fontSize = fontSize + 'px';
                showMenu();
            } else if (event.key === 'ArrowDown') {
                fontSize -= 2;
                document.body.style.fontSize = fontSize + 'px';
                showMenu();
            } else if (event.key === 'ArrowLeft') {
                fadeRate += 100;
                showMenu();
            } else if (event.key === 'ArrowRight') {
                fadeRate -= 100;
                showMenu();
            }
        });

        function showMenu() {
            menu.innerHTML = `Up/Down Font Size: ${fontSize}<br>Left/Right Fade Rate: ${fadeRate}`;
            menu.style.opacity = 1;
            setTimeout(() => {
                menu.style.opacity = 0;
            }, 1000);
        }
    </script>
</body>
</html>
