<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Real-Time Audio Transcription</title>
    <style>
        body {
            background-color: black;
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            font-size: 50px;
            text-align: center;
        }
        .transcription {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            white-space: nowrap;
        }
        .fade-out {
            transition: opacity 0.5s ease-out;
            opacity: 0;
        }
    </style>
</head>
<body>
    <div class="transcription" id="transcription"></div>
    <script>
        let recognition;
        let transcriptionDiv = document.getElementById('transcription');
        let currentText = '';
        let fadeTimeout;
        let fontSize = 50;
        let fadeDuration = 500;

        if ('webkitSpeechRecognition' in window) {
            recognition = new webkitSpeechRecognition();
        } else if ('SpeechRecognition' in window) {
            recognition = new SpeechRecognition();
        } else {
            alert('Your browser does not support speech recognition.');
        }

        recognition.continuous = true;
        recognition.interimResults = true;
        recognition.lang = 'en-US';

        recognition.onresult = function(event) {
            clearTimeout(fadeTimeout);
            let interimTranscript = '';
            for (let i = event.resultIndex; i < event.results.length; ++i) {
                if (event.results[i].isFinal) {
                    currentText += event.results[i].transcript + ' ';
                } else {
                    interimTranscript += event.results[i].transcript;
                }
            }
            transcriptionDiv.innerHTML = currentText + '<span style="opacity: 0.5;">' + interimTranscript + '</span>';
            fadeTimeout = setTimeout(() => {
                transcriptionDiv.classList.add('fade-out');
            }, 500);
        };

        recognition.onerror = function(event) {
            console.error(event.error);
        };

        recognition.onend = function() {
            recognition.start();
        };

        recognition.start();

        document.addEventListener('keydown', function(event) {
            if (event.key === 'ArrowUp') {
                fontSize += 5;
                document.body.style.fontSize = fontSize + 'px';
            } else if (event.key === 'ArrowDown') {
                fontSize -= 5;
                document.body.style.fontSize = fontSize + 'px';
            } else if (event.key === 'ArrowLeft') {
                fadeDuration -= 100;
                document.querySelector('.fade-out').style.transition = `opacity ${fadeDuration}ms ease-out`;
            } else if (event.key === 'ArrowRight') {
                fadeDuration += 100;
                document.querySelector('.fade-out').style.transition = `opacity ${fadeDuration}ms ease-out`;
            } else if (event.key === 'M') {
                // Handle microphone selection logic here
            }
        });
    </script>
</body>
</html>
