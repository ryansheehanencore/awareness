<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Live Transcription</title>
    <style>
        body {
            background-color: black;
            color: white;
            font-size: 50px;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            overflow: hidden;
        }
        #transcription {
            text-align: center;
            width: 80%;
        }
        #menu {
            position: absolute;
            top: 10px;
            left: 10px;
            display: none;
        }
    </style>
</head>
<body>
    <div id="prompt">Press "M" to start transcription</div>
    <div id="transcription"></div>
    <div id="menu">
        <p>Font Size: <span id="fontSize">50</span></p>
        <p>Fade-out Time: <span id="fadeTime">500</span>ms</p>
    </div>
    <script>
        let fontSize = 50;
        let fadeTime = 500;
        let transcription = document.getElementById('transcription');
        let prompt = document.getElementById('prompt');
        let menu = document.getElementById('menu');
        let fontSizeDisplay = document.getElementById('fontSize');
        let fadeTimeDisplay = document.getElementById('fadeTime');

        document.addEventListener('keydown', (event) => {
            if (event.key === 'M' || event.key === 'm') {
                startTranscription();
            } else if (event.key === 'ArrowUp') {
                fontSize += 5;
                updateSettings();
            } else if (event.key === 'ArrowDown') {
                fontSize -= 5;
                updateSettings();
            } else if (event.key === 'ArrowLeft') {
                fadeTime -= 100;
                updateSettings();
            } else if (event.key === 'ArrowRight') {
                fadeTime += 100;
                updateSettings();
            }
        });

        function updateSettings() {
            transcription.style.fontSize = fontSize + 'px';
            fontSizeDisplay.textContent = fontSize;
            fadeTimeDisplay.textContent = fadeTime;
        }

        function startTranscription() {
            prompt.style.display = 'none';
            menu.style.display = 'block';
            transcription.style.fontSize = fontSize + 'px';

            const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
            recognition.continuous = true;
            recognition.interimResults = true;

            recognition.onresult = (event) => {
                let interimTranscript = '';
                for (let i = event.resultIndex; i < event.results.length; i++) {
                    const transcript = event.results[i].transcript;
                    if (event.results[i].isFinal) {
                        addPhrase(transcript);
                    } else {
                        interimTranscript += transcript;
                    }
                }
                transcription.innerHTML = interimTranscript;
            };

            recognition.start();
        }

        function addPhrase(phrase) {
            const newLine = document.createElement('div');
            newLine.textContent = phrase;
            transcription.appendChild(newLine);
            if (transcription.children.length > 3) {
                transcription.removeChild(transcription.firstChild);
            }
            setTimeout(() => {
                newLine.style.opacity = 0;
            }, fadeTime);
        }
    </script>
</body>
</html>
